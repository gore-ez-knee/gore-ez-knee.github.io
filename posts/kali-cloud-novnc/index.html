<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Stream Kali Linux to your Browser from AWS" /><meta property="og:locale" content="en" /><meta name="description" content="Have you ever wanted to: Stand up an instance of a Kali desktop environment in the cloud to perform testing? Spin up a Linux desktop environment to bypass workspace restrictions? Browse websites anonymously/without attribution? Setup an environment to safely monitor/deploy malware for testing?" /><meta property="og:description" content="Have you ever wanted to: Stand up an instance of a Kali desktop environment in the cloud to perform testing? Spin up a Linux desktop environment to bypass workspace restrictions? Browse websites anonymously/without attribution? Setup an environment to safely monitor/deploy malware for testing?" /><link rel="canonical" href="https://gore-ez-knee.github.io/posts/kali-cloud-novnc/" /><meta property="og:url" content="https://gore-ez-knee.github.io/posts/kali-cloud-novnc/" /><meta property="og:site_name" content="Gore-Ez-Knee" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-09-25T10:00:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Stream Kali Linux to your Browser from AWS" /><meta name="twitter:site" content="@gore_ez_knee" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-09-26T17:07:36-05:00","datePublished":"2022-09-25T10:00:00-05:00","description":"Have you ever wanted to: Stand up an instance of a Kali desktop environment in the cloud to perform testing? Spin up a Linux desktop environment to bypass workspace restrictions? Browse websites anonymously/without attribution? Setup an environment to safely monitor/deploy malware for testing?","headline":"Stream Kali Linux to your Browser from AWS","mainEntityOfPage":{"@type":"WebPage","@id":"https://gore-ez-knee.github.io/posts/kali-cloud-novnc/"},"url":"https://gore-ez-knee.github.io/posts/kali-cloud-novnc/"}</script><title>Stream Kali Linux to your Browser from AWS | Gore-Ez-Knee</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Gore-Ez-Knee"><meta name="application-name" content="Gore-Ez-Knee"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/avatar.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Gore-Ez-Knee</a></div><div class="site-subtitle font-italic">Nerd</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/gore-ez-knee" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/gore_ez_knee" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['gore.ez.knee','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Stream Kali Linux to your Browser from AWS</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1920 300'%3E%3C/svg%3E" data-src="/assets/img/post_images/kali_stream_aws/kali-banner.png" class="preview-img bg" alt="Preview Image" width="1920" height="300" data-proofer-ignore><h1 data-toc-skip>Stream Kali Linux to your Browser from AWS</h1><div class="post-meta text-muted"><div> By <em> <a href="https://twitter.com/gore_ez_knee">Gore-Ez-Knee</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1664118000" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-09-25 </em> </span> <span> Updated <em class="timeago" data-ts="1664230056" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-09-26 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1094 words"> <em>6 min</em> read</span></div></div></div><div class="post-content"><p>Have you ever wanted to:</p><ul><li>Stand up an instance of a Kali desktop environment in the cloud to perform testing?<li>Spin up a Linux desktop environment to bypass workspace restrictions?<li>Browse websites anonymously/without attribution?<li>Setup an environment to safely monitor/deploy malware for testing?</ul><p><a href="https://www.kasmweb.com/docs/latest/index.html">KASM Workspace</a> is a viable option which streams tools and desktop environments (DE) from Docker containers to your browser. There are some limitations though. Each container defaults to 2 CPUs and 2768MB of memory, so if you want to deploy this for a small team, you would need a sizable instance. Plus there is a max of 5 concurrent sessions for the free community edition.</p><p>But if you just need a quick Kali or other Linux deployment, I have a solution that uses TigerVNC and NoVNC to get you up in running with no additional client tools needed.</p><h2 id="deploy-kali-in-your-account"><span class="mr-2">Deploy Kali in your Account</span><a href="#deploy-kali-in-your-account" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>To start off, login to your AWS account and navigate to the EC2 Dashboard. Then click <code class="language-plaintext highlighter-rouge">Launch Instance</code> right below the <code class="language-plaintext highlighter-rouge">Resources</code> field.</ul><p><img data-src="/assets/img/post_images/kali_stream_aws/step-1.png" alt="" data-proofer-ignore></p><ul><li><p>Call the instance whatever you’d like under <code class="language-plaintext highlighter-rouge">Names and tags</code>. I’ll just call mine <code class="language-plaintext highlighter-rouge">Kali</code></p><li><p>Under <code class="language-plaintext highlighter-rouge">Applications and OS Images (Amazon Machine Image)</code>, type <code class="language-plaintext highlighter-rouge">kali</code> in the search bar and hit <kbd>Enter</kbd></p></ul><p><img data-src="/assets/img/post_images/kali_stream_aws/step-2.png" alt="" data-proofer-ignore></p><ul><li>The first result should be the official Kali AMI from the AWS Marketplace. Go ahead and select it. There will be a pop-up next. Just hit <code class="language-plaintext highlighter-rouge">Continue</code> when it does.</ul><p><img data-src="/assets/img/post_images/kali_stream_aws/step-3.png" alt="" data-proofer-ignore></p><ul><li><p>Keep the <code class="language-plaintext highlighter-rouge">Instance Type</code> as a t2.medium.</p><li><p>Under <code class="language-plaintext highlighter-rouge">Key pair (login)</code> select a key pair you have. If you do not have one, click on <code class="language-plaintext highlighter-rouge">Create new key pair</code></p><li><p>Under <code class="language-plaintext highlighter-rouge">Network settings</code>, make sure you are deploying this in a public subnet so you can access and have an IP automatically assigned to your instance. If you need to edit your subnet, click <code class="language-plaintext highlighter-rouge">Edit</code> in the upper-right corner of the <code class="language-plaintext highlighter-rouge">Network settings</code> box</p><li><p>Under <code class="language-plaintext highlighter-rouge">Firewall (security groups)</code>, you can select select an existing security group that only allows SSH from your IP, else just create one and allow SSH only from your IP</p></ul><p><img data-src="/assets/img/post_images/kali_stream_aws/step-4.png" alt="" data-proofer-ignore></p><ul><li><p>Finally, give yourself a little bit more storage. I usually bump it to 25 GiB.</p><li><p>Once everything is filled in, click <code class="language-plaintext highlighter-rouge">Launch Instance</code></p></ul><h2 id="install-the-tools"><span class="mr-2">Install the Tools</span><a href="#install-the-tools" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>It might take a couple of minutes for the instance to be ready, but once it is SSH into your instance with this command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ssh <span class="nt">-i</span> &lt;path/to/private_key.pem&gt; <span class="nt">-L</span> 8081:localhost:8081 kali@&lt;instance ip&gt;
</pre></table></code></div></div><p>We are going to go ahead and local forward all port 8081 traffic from our computer to the instance on localhost:8081. Once you enter the command, you should be logged in to your Kali instance.</p><p><img data-src="/assets/img/post_images/kali_stream_aws/step-5.png" alt="" data-proofer-ignore></p><p>There isn’t much to look at here, so we need to give it a desktop environment, some Kali tools, a VNC server, and finally noVNC. We’ll grab the latest package versions from the repos and download the necessary tools:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>sudo apt update
sudo DEBIAN_FRONTEND=noninteractive apt install -y kali-linux-default kali-desktop-xfce tigervnc-standalone-server novnc
</pre></table></code></div></div><blockquote class="prompt-info"><div><p>The <code class="language-plaintext highlighter-rouge">DEBIAN_FRONTEND=noninteractive</code> is added to skip certain installation prompts. It’s also nice when you want to script this out and not have the script break from the prompting. The <code class="language-plaintext highlighter-rouge">kali-linux-default</code> installs the core set of Kali tools.</p></div></blockquote><p>This will take several minutes to complete.</p><h2 id="setup-the-environment"><span class="mr-2">Setup the Environment</span><a href="#setup-the-environment" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Once finished, go ahead and set your VNC password and verify it. We’re not worried about a view-only password.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>┌──(kali㉿kali)-[~]
└─$ vncpasswd
Password:
Verify:
Would you like to enter a view-only password (y/n)? n
A view-only password is not used
</pre></table></code></div></div><p>Then we’ll need to create a file needed for VNC. If it doesn’t exist, it gets a little upset. It doesn’t need to have anything in it, so we can just:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>touch ~/.Xresources
</pre></table></code></div></div><h2 id="start-the-services"><span class="mr-2">Start the Services</span><a href="#start-the-services" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Now we’ll start the two services. First is TigerVNC:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>tigervncserver -xstartup /usr/bin/xfce4-session -localhost
</pre></table></code></div></div><p>This will start the VNC server and expose the VNC port on the localhost.</p><p>Finally we’ll start noVNC:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>websockify -D --web /usr/share/novnc/ 8081 localhost:5901
</pre></table></code></div></div><p>This will expose port 8081 on the host. Being as how this is on an instance with a security group only allowing SSH traffic from your IP, it’s not a big deal. If you are deploying this in your home lab and would like to only expose this port to localhost and not have to deal with iptables, change <code class="language-plaintext highlighter-rouge">websockify -D --web /usr/share/novnc/ 8081 localhost:5901</code> to <code class="language-plaintext highlighter-rouge">websockify -D --web /usr/share/novnc/ localhost:8081 localhost:5901</code></p><h2 id="profit"><span class="mr-2">Profit</span><a href="#profit" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Now just go to your browser and type:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>http://localhost:8081/vnc.html?resize=remote
</pre></table></code></div></div><p>The <code class="language-plaintext highlighter-rouge">resize=remote</code> will make the screen automatically resize based on your dimensions of your browser. Click on <code class="language-plaintext highlighter-rouge">Connect</code> and you’ll be prompted for the VNC password you created.</p><p><img data-src="/assets/img/post_images/kali_stream_aws/step-6.png" alt="" data-proofer-ignore></p><h2 id="a-quick-script"><span class="mr-2">A Quick Script</span><a href="#a-quick-script" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>I scripted this process out to generate the necessary files, create a random password for the VNC server, and display the required URL to access the desktop environment. To setup:</p><ul><li>Create the script file:<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>vim script.sh
</pre></table></code></div></div><li>Add the following contents:<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="nv">mypasswd</span><span class="o">=</span><span class="si">$(</span>strings /dev/urandom | <span class="nb">grep</span> <span class="nt">-o</span> <span class="s1">'[[:alnum:]]'</span> | <span class="nb">head</span> <span class="nt">-n</span> 30 | <span class="nb">tr</span> <span class="nt">-d</span> <span class="s1">'\n'</span><span class="p">;</span> <span class="nb">echo</span><span class="si">)</span>

<span class="nb">sudo </span>apt update
<span class="nb">sudo </span><span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span>noninteractive apt <span class="nb">install</span> <span class="nt">-y</span> kali-linux-default kali-desktop-xfce tigervnc-standalone-server novnc
<span class="nb">umask </span>0077
<span class="nb">mkdir</span> <span class="nt">-p</span> <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/.vnc"</span>
<span class="nb">chmod </span>go-rwx <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/.vnc"</span>
vncpasswd <span class="nt">-f</span> <span class="o">&lt;&lt;&lt;</span> <span class="s2">"</span><span class="nv">$mypasswd</span><span class="s2">"</span> <span class="o">&gt;</span> <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/.vnc/passwd"</span>
<span class="nb">touch</span> ~/.Xresources
tigervncserver <span class="nt">-xstartup</span> /usr/bin/xfce4-session <span class="nt">-localhost</span>
websockify <span class="nt">-D</span> <span class="nt">--web</span> /usr/share/novnc/ localhost:8081 localhost:5901
<span class="nb">printf</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">http://localhost:8081/vnc.html?resize=remote&amp;password=</span><span class="k">${</span><span class="nv">mypasswd</span><span class="k">}</span><span class="se">\n\n</span><span class="s2">"</span>
</pre></table></code></div></div><li>Make the script executable:<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">chmod</span> +x script.sh
</pre></table></code></div></div><li>Run the script:<div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>./script.sh
</pre></table></code></div></div></ul><h2 id="after-thoughts"><span class="mr-2">After-Thoughts</span><a href="#after-thoughts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>You can provide self-signed certs to give websockify TLS support. <a href="https://github.com/novnc/websockify">websockify - github</a><li>Once everything is setup on Kali how you like (ie. configuring kali tools), create your own AMI based off of the instance. Then, you’ll never have to worry about setting everything up again, and you can just deploy an instance with that custom AMI. <a href="https://docs.aws.amazon.com/toolkit-for-visual-studio/latest/user-guide/tkv-create-ami-from-instance.html">AWS Doc</a><li>You could create a CloudFormation or Terraform script to spin something like this up automatically whenever you need it.<li>This can be done on other flavors of Linux. The one I’ve found for Ubuntu utilizes an <code class="language-plaintext highlighter-rouge">xstartup</code> file. This <a href="https://bytexd.com/how-to-install-configure-vnc-server-on-ubuntu/">site</a> shows how you can setup VNC with different Desktop Environments for Ubuntu. When you create the <code class="language-plaintext highlighter-rouge">xstartup</code> file, you can ignore using the <code class="language-plaintext highlighter-rouge">--xstartup</code> flag in the <code class="language-plaintext highlighter-rouge">tigervncserver</code> command.<ul><li><em>Sidenote</em>: If you want to use Firefox in Ubuntu with VNC, follow this guide to remove Firefox from the snap store and install Firefox from the apt repository [ <a href="https://fostips.com/ubuntu-21-10-two-firefox-remove-snap/">link</a> ].</ul><li>If you have a high definition display, the <code class="language-plaintext highlighter-rouge">resize=remote</code> might make it hard to view the contents of the desktop. On the left sidebar you can click <code class="language-plaintext highlighter-rouge">Settings</code> → <code class="language-plaintext highlighter-rouge">Scaling Mode: Local Scaling</code>, then change the resolution on the virtual desktop. It’s not great, but it works.</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/misc/'>Misc</a>, <a href='/categories/aws/'>AWS</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/aws/" class="post-tag no-text-decoration" >aws</a> <a href="/tags/kali/" class="post-tag no-text-decoration" >kali</a> <a href="/tags/novnc/" class="post-tag no-text-decoration" >novnc</a> <a href="/tags/tigervnc/" class="post-tag no-text-decoration" >tigervnc</a> <a href="/tags/vnc/" class="post-tag no-text-decoration" >vnc</a> <a href="/tags/websockify/" class="post-tag no-text-decoration" >websockify</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Stream Kali Linux to your Browser from AWS - Gore-Ez-Knee&amp;url=https://gore-ez-knee.github.io/posts/kali-cloud-novnc/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Stream Kali Linux to your Browser from AWS - Gore-Ez-Knee&amp;u=https://gore-ez-knee.github.io/posts/kali-cloud-novnc/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://gore-ez-knee.github.io/posts/kali-cloud-novnc/&amp;text=Stream Kali Linux to your Browser from AWS - Gore-Ez-Knee" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/kali-cloud-novnc/">Stream Kali Linux to your Browser from AWS</a><li><a href="/posts/backup-restore-gitlab/">Backup/Restore GitLab</a><li><a href="/posts/getting-started-cybersecurity/">Intro to Cybersecurity</a><li><a href="/posts/htb-ca-2022-writeup-table/">HTB Cyber Apocalypse CTF - Table of Write-ups</a><li><a href="/posts/elastic-install/">Quickstart Elastic Stack</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/htb/">htb</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/ctf/">ctf</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/gitlab/">gitlab</a> <a class="post-tag" href="/tags/ubuntu/">ubuntu</a> <a class="post-tag" href="/tags/docker-compose/">docker-compose</a> <a class="post-tag" href="/tags/elastic/">elastic</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/evt/">evt</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/backup-restore-gitlab/"><div class="card-body"> <em class="timeago small" data-ts="1654354800" > 2022-06-04 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Backup/Restore GitLab</h3><div class="text-muted small"><p> Do you have a small GitLab container running on an instance in AWS for yourself or a small team? Have you ever needed to back-up GitLab and move it to another machine wether that be on another inst...</p></div></div></a></div><div class="card"> <a href="/posts/ubuntu-server-setup/"><div class="card-body"> <em class="timeago small" data-ts="1648150200" > 2022-03-24 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Ubuntu Server Setup</h3><div class="text-muted small"><p> Here is a guide I created to stand up an Ubuntu Server to test standing up an Elastic Stack. Downloaded the Ubuntu Server iso: https://ubuntu.com/download/server Using VMware Workstation...</p></div></div></a></div><div class="card"> <a href="/posts/elastic-install/"><div class="card-body"> <em class="timeago small" data-ts="1648409400" > 2022-03-27 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Quickstart Elastic Stack</h3><div class="text-muted small"><p> I have experience installing Elastic Cloud on Kubernetes (ECK) using AWS Elastic Kubernetes Service (EKS). But I have never tried a manual install on a server. These are the instructions I ran to g...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/backup-restore-gitlab/" class="btn btn-outline-primary" prompt="Older"><p>Backup/Restore GitLab</p></a> <span class="btn btn-outline-primary disabled" prompt="Newer"><p>-</p></span></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/gore_ez_knee">Gore-Ez-Knee</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/htb/">htb</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/ctf/">ctf</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/gitlab/">gitlab</a> <a class="post-tag" href="/tags/ubuntu/">ubuntu</a> <a class="post-tag" href="/tags/docker-compose/">docker-compose</a> <a class="post-tag" href="/tags/elastic/">elastic</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/evt/">evt</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-BJ7S2G5H9F"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-BJ7S2G5H9F'); }); </script>
