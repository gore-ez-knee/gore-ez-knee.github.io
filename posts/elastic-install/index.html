<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Quickstart Elastic Stack" /><meta name="author" content="gore-ez-knee" /><meta property="og:locale" content="en" /><meta name="description" content="I have experience installing Elastic Cloud on Kubernetes (ECK) using AWS Elastic Kubernetes Service (EKS). But I have never tried a manual install on a server. These are the instructions I ran to get Elasticsearch and Kibana up and running with HTTPS enabled between Kibana and our browser. With the introduction of Elastic Agents, I also provided instructions on setting up a Fleet-server as well as a fleet-managed Elastic Agent on a Windows VM to start collecting logs. Personally I think I would prefer setting up Elastic with Docker, and perhaps I’ll add to this guide to include Docker installation later. But for now I just wanted to try a bare metal install of an Elastic Stack. To mimic installing, configuring, and accessing an Elastic Stack on a server via a cloud provider or anywhere really, I thought it would be beneficial to setup my own server on a VM to test the waters. If you would like to follow along with testing this on an Ubuntu Server VM, you can follow the guide I created here" /><meta property="og:description" content="I have experience installing Elastic Cloud on Kubernetes (ECK) using AWS Elastic Kubernetes Service (EKS). But I have never tried a manual install on a server. These are the instructions I ran to get Elasticsearch and Kibana up and running with HTTPS enabled between Kibana and our browser. With the introduction of Elastic Agents, I also provided instructions on setting up a Fleet-server as well as a fleet-managed Elastic Agent on a Windows VM to start collecting logs. Personally I think I would prefer setting up Elastic with Docker, and perhaps I’ll add to this guide to include Docker installation later. But for now I just wanted to try a bare metal install of an Elastic Stack. To mimic installing, configuring, and accessing an Elastic Stack on a server via a cloud provider or anywhere really, I thought it would be beneficial to setup my own server on a VM to test the waters. If you would like to follow along with testing this on an Ubuntu Server VM, you can follow the guide I created here" /><link rel="canonical" href="https://gore-ez-knee.github.io/posts/elastic-install/" /><meta property="og:url" content="https://gore-ez-knee.github.io/posts/elastic-install/" /><meta property="og:site_name" content="Gore-Ez-Knee" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-03-27T14:30:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Quickstart Elastic Stack" /><meta name="twitter:site" content="@gore_ez_knee" /><meta name="twitter:creator" content="@gore-ez-knee" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"gore-ez-knee"},"dateModified":"2022-04-18T22:03:16-05:00","datePublished":"2022-03-27T14:30:00-05:00","description":"I have experience installing Elastic Cloud on Kubernetes (ECK) using AWS Elastic Kubernetes Service (EKS). But I have never tried a manual install on a server. These are the instructions I ran to get Elasticsearch and Kibana up and running with HTTPS enabled between Kibana and our browser. With the introduction of Elastic Agents, I also provided instructions on setting up a Fleet-server as well as a fleet-managed Elastic Agent on a Windows VM to start collecting logs. Personally I think I would prefer setting up Elastic with Docker, and perhaps I’ll add to this guide to include Docker installation later. But for now I just wanted to try a bare metal install of an Elastic Stack. To mimic installing, configuring, and accessing an Elastic Stack on a server via a cloud provider or anywhere really, I thought it would be beneficial to setup my own server on a VM to test the waters. If you would like to follow along with testing this on an Ubuntu Server VM, you can follow the guide I created here","headline":"Quickstart Elastic Stack","mainEntityOfPage":{"@type":"WebPage","@id":"https://gore-ez-knee.github.io/posts/elastic-install/"},"url":"https://gore-ez-knee.github.io/posts/elastic-install/"}</script><title>Quickstart Elastic Stack | Gore-Ez-Knee</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Gore-Ez-Knee"><meta name="application-name" content="Gore-Ez-Knee"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/avatar.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Gore-Ez-Knee</a></div><div class="site-subtitle font-italic">Nerd</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/gore-ez-knee" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/gore_ez_knee" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['gore.ez.knee','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Quickstart Elastic Stack</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1700 400'%3E%3C/svg%3E" data-src="/assets/img/post_images/elastic_install/banner.png" class="preview-img bg" alt="Preview Image" width="1700" height="400" data-proofer-ignore><h1 data-toc-skip>Quickstart Elastic Stack</h1><div class="post-meta text-muted"><div> By <em> <a href="https://twitter.com/gore_ez_knee">Gore-Ez-Knee</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1648409400" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-03-27 </em> </span> <span> Updated <em class="timeago" data-ts="1650337396" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-04-18 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2494 words"> <em>13 min</em> read</span></div></div></div><div class="post-content"><p>I have experience installing Elastic Cloud on Kubernetes (ECK) using AWS Elastic Kubernetes Service (EKS). But I have never tried a manual install on a server. These are the instructions I ran to get Elasticsearch and Kibana up and running with HTTPS enabled between Kibana and our browser. With the introduction of Elastic Agents, I also provided instructions on setting up a Fleet-server as well as a fleet-managed Elastic Agent on a Windows VM to start collecting logs. Personally I think I would prefer setting up Elastic with Docker, and perhaps I’ll add to this guide to include Docker installation later. But for now I just wanted to try a bare metal install of an Elastic Stack. To mimic installing, configuring, and accessing an Elastic Stack on a server via a cloud provider or anywhere really, I thought it would be beneficial to setup my own server on a VM to test the waters. If you would like to follow along with testing this on an Ubuntu Server VM, you can follow the guide I created <a href="https://gore-ez-knee.github.io/posts/ubuntu-server-setup/">here</a></p><p>These are the guides I used to help set this up:</p><ul><li><a href="https://www.elastic.co/guide/en/elastic-stack-get-started/current/get-started-elastic-stack.html">https://www.elastic.co/guide/en/elastic-stack-get-started/current/get-started-elastic-stack.html</a><li><a href="https://www.elastic.co/guide/en/kibana/current/deb.html">https://www.elastic.co/guide/en/kibana/current/deb.html</a><li><a href="https://www.elastic.co/guide/en/fleet/master/secure-connections.html#generate-fleet-server-certs">https://www.elastic.co/guide/en/fleet/master/secure-connections.html#generate-fleet-server-certs</a></ul><h2 id="elasticsearch"><span class="mr-2"><strong>Elasticsearch</strong></span><a href="#elasticsearch" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>First thing’s first, we’ll update and upgrade all of the packages on Ubuntu Server:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sudo apt update &amp;&amp; sudo apt upgrade -y &amp;&amp; sudo apt autoremove -y
</pre></table></code></div></div><p>With this being Ubuntu, we’ll install using debian packages:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>curl -L -O https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.1.1-amd64.deb
sudo dpkg -i elasticsearch-8.1.1-amd64.deb
</pre></table></code></div></div><p>The output here is important. You’ll want to make sure you copy and paste this somewhere for reference. It has reference commands to change the superuser password and generating enrollment tokens for Kibana and Elasticsearch. It also contains the built-in elastic superuser password.</p><p>If you would like to ensure that Elasticsearch starts automatically when the system boots:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>sudo /bin/systemctl daemon-reload
sudo /bin/systemctl enable elasticsearch.service
</pre></table></code></div></div><p>To start the Elasticsearch service, run:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sudo /bin/systemctl start elasticsearch.service
</pre></table></code></div></div><p>Open up a second terminal window on your host and attempt to <code class="language-plaintext highlighter-rouge">curl</code> the Elasticsearch service using the VMs IP and replace <code class="language-plaintext highlighter-rouge">PASSWORD</code> with the password given in the security configuration output when Elasticsearch was installed. You should see a similar output:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre>$ curl -k -u "elastic:PASSWORD" https://192.168.235.129:9200
{
  "name" : "elastic",
  "cluster_name" : "elasticsearch",
  "cluster_uuid" : "hagNR9aLTLaXk-TQkBnt9w",
  "version" : {
    "number" : "8.1.1",
    "build_flavor" : "default",
    "build_type" : "deb",
    "build_hash" : "d0925dd6f22e07b935750420a3155db6e5c58381",
    "build_date" : "2022-03-17T22:01:32.658689558Z",
    "build_snapshot" : false,
    "lucene_version" : "9.0.0",
    "minimum_wire_compatibility_version" : "7.17.0",
    "minimum_index_compatibility_version" : "7.0.0"
  },
  "tagline" : "You Know, for Search"
}
</pre></table></code></div></div><p>Now we’ll generate an enrollment token for Kibana. You can reference the security configuration output when we installed Elasticsearch for the command:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sudo /usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s kibana
</pre></table></code></div></div><p>Copy the output and save it for use in the next couple of steps.</p><h2 id="kibana"><span class="mr-2"><strong>Kibana</strong></span><a href="#kibana" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Download and install the Kibana debian package:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>wget https://artifacts.elastic.co/downloads/kibana/kibana-8.1.1-amd64.deb
sudo dpkg -i kibana-8.1.1-amd64.deb
</pre></table></code></div></div><p>Now run the next command, pasting in the enrollment token when prompted:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>$ sudo /usr/share/kibana/bin/kibana-setup
? Enter enrollment token: &lt;Enrollment Token String&gt;

✔ Kibana configured successfully.

To start Kibana run:
  bin/kibana
</pre></table></code></div></div><p>To have Kibana configured to run at startup:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>sudo /bin/systemctl daemon-reload
sudo /bin/systemctl enable kibana.service
</pre></table></code></div></div><p>Before we start Kibana, we need to configure a few things first. First we need to create some self-signed certs to enable HTTPS between Kibana and our browser, then configure <code class="language-plaintext highlighter-rouge">/etc/kibana/kibana.yml</code> to reflect those changes.</p><p>To generate self-signed certs using the elasticsearch-certutil binary, run the following. You may choose to add a password to your certificate file:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sudo /user/share/elasticsearch/bin/elasticsearch-certutil cert -name kibana-certs --self-signed
</pre></table></code></div></div><p>For my preference I am going to create a <code class="language-plaintext highlighter-rouge">certs</code> directory in <code class="language-plaintext highlighter-rouge">/etc/kibana</code>, move the certificate file there, then give ownership of the certs to <code class="language-plaintext highlighter-rouge">kibana</code>. That last command is very important:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>sudo mkdir /etc/kibana/certs &amp;&amp; sudo mv /usr/share/elasticsearch/kibana-certs.p12 /etc/kibana/ce
rts &amp;&amp; sudo chown -R kibana: /etc/kibana/certs
</pre></table></code></div></div><p>Now we’ll update <code class="language-plaintext highlighter-rouge">/etc/kibana/kibana.yml</code>. Add the following:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="na">server.host</span><span class="pi">:</span> <span class="s">0.0.0.0</span>
<span class="na">server.ssl.enabled</span><span class="pi">:</span> <span class="no">true</span>
<span class="na">server.ssl.keystore.path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/etc/kibana/certs/kibana-certs.p12"</span>
<span class="c1"># If you didn't give your keystore a passphrase uncomment the next line</span>
<span class="c1">#server.ssl.keystore.password: ""</span>
</pre></table></code></div></div><p>If you added a password to your certificate, add it to kibana’s keystore:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sudo /usr/share/kibana/kibana-keystore add server.ssl.keystore.password
</pre></table></code></div></div><p>We also want to secure the saved objects that are stored in Kibana such as dashboards, visualizations, alerts, actions, and advanced settings. These objects might include sensitive information. To add a layer of protection to these saved objects (which are kept in a dedicated, internal index), we’ll use the <code class="language-plaintext highlighter-rouge">kibana-encryption-keys</code> binary to generate keys for us to place inside of <code class="language-plaintext highlighter-rouge">kibana.yml</code>.</p><p>If you would like to setup key rotation as well, you can follow Elastics <a href="https://www.elastic.co/guide/en/kibana/current/xpack-security-secure-saved-objects.html">Kibana Guide</a>.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sudo /usr/share/kibana/bin/kibana-encryption-keys generate -f | tail -4 | sudo tee -a /etc/kibana/kibana.yml &amp;&gt;/dev/null
</pre></table></code></div></div><p>Finally we’ll start Kibana</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sudo /bin/systemctl start kibana.service
</pre></table></code></div></div><p>If everything worked correctly, you can open up a browser on your host and type in <code class="language-plaintext highlighter-rouge">https://SERVER_IP:5601</code>. You should be greeted with a “Your connection is not secure” warning. That’s okay, because these are self-signed certificates that you created. Accept the risk and proceed to starting out with Elastic!</p><p><img data-src="/assets/img/post_images/elastic_install/snip21.png" alt="" data-proofer-ignore></p><p>We can sign in with user <code class="language-plaintext highlighter-rouge">elastic</code> and the password given to us from the security configuration output when we installed Elasticsearch.</p><h2 id="fleet-server"><span class="mr-2"><strong>Fleet Server</strong></span><a href="#fleet-server" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Download and install the Elastic Agent Debian package:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>curl -L -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-8.1.1-amd64.deb
sudo dpkg -i elastic-agent-8.1.1-amd64.deb
</pre></table></code></div></div><p>Now we’ll follow <a href="https://www.elastic.co/guide/en/fleet/master/secure-connections.html#generate-fleet-server-certs">this guide</a> to setup TLS communication with the fleet server. Elastic Agents require a PEM formatted certificate so we’ll start off with creating a CA for our fleet server certificates:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>sudo /usr/share/elasticsearch/bin/elasticsearch-certutil -s ca \
--pem --out /etc/elasticsearch/certs/ca.zip
sudo unzip -q /etc/elasticsearch/certs/ca.zip -d /etc/elasticsearch/certs/
sudo rm /etc/elasticsearch/certs/ca.zip
</pre></table></code></div></div><blockquote class="prompt-info"><div><p>If you need to install unzip, run <code class="language-plaintext highlighter-rouge">sudo apt install unzip</code></p></div></blockquote><p>With CA certificates, we can create certificates for our fleet server:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>sudo /usr/share/elasticsearch/bin/elasticsearch-certutil cert -s \
--name fleet-server --ca-cert /etc/elasticsearch/certs/ca/ca.crt \
--ca-key /etc/elasticsearch/certs/ca/ca.key \
--out /etc/elastic-agent/certs/fleet-server.zip --pem
sudo unzip /etc/elastic-agent/certs/fleet-server.zip -d /etc/elastic-agent/certs/ &amp;&gt;/dev/null
sudo rm /etc/elastic-agent/certs/fleet-server.zip
</pre></table></code></div></div><p>Next let’s login to Kibana and under <code class="language-plaintext highlighter-rouge">Management</code>, click on <code class="language-plaintext highlighter-rouge">Fleet</code></p><p><img data-src="/assets/img/post_images/elastic_install/snip22.png" alt="" data-proofer-ignore></p><p>There will be a page with steps showing how to add a Fleet Server. They’re pretty straight forward, but will need a bit of modification. Right now, there are no fleet server policies. So on Step 1, be sure to click on <code class="language-plaintext highlighter-rouge">Create Policy</code>. If you would like to change what logs the agent will collect, you can select/deselect <code class="language-plaintext highlighter-rouge">Collect system logs and metrics</code> and/or under <code class="language-plaintext highlighter-rouge">Advanced options -&gt; Agent monitoring</code> you can select/deselect <code class="language-plaintext highlighter-rouge">Collect agent logs</code> and <code class="language-plaintext highlighter-rouge">Collect agent metrics.</code></p><p><img data-src="/assets/img/post_images/elastic_install/snip23.png" alt="" data-proofer-ignore></p><p>Ignore Step 2, because we have already downloaded and installed Elastic Agent</p><p>On Step 3, we’ll choose the <code class="language-plaintext highlighter-rouge">Quick start</code> deployment type. On Step 4, since our Fleet Server will be installed on the same server as our stack, we’ll use our server IP as our Fleet Server host (https://SERVER_IP:8220). Be sure to click <code class="language-plaintext highlighter-rouge">Add host</code>. On Step 5, click <code class="language-plaintext highlighter-rouge">Generate service token</code></p><p><img data-src="/assets/img/post_images/elastic_install/snip24.png" alt="" data-proofer-ignore></p><p>Now we come to the last step. Here’s where we’ll change a few things. We’ll need to add our certificates we created for our Fleet Server. And since this is a Debian package installation of Elastic Agent, we’ll need to use <code class="language-plaintext highlighter-rouge">enroll</code> instead of <code class="language-plaintext highlighter-rouge">install</code> and we’ll have to manually start the Elastic Agent after the Agent enrolls.</p><p>Here is the template to enroll the agent:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>sudo elastic-agent enroll -f \
--url=https://192.168.235.130:8220 \
--fleet-server-es=https://192.168.235.130:9200 \
--fleet-server-service-token=AAEAAWVsYXN0aWMvZmxlZXQtc2VydmVyL3Rva2VuLTE2NDg0MDQ5MjQ0OTg6cWRjN0lLNWZTaDJJbnVkb0NWTTgzQQ \
--fleet-server-policy=fleet-server-policy \
--fleet-server-es-ca-trusted-fingerprint=dd9d32e7c53bbc30c56a740db3752c01db7545d5bb9c8e951fc446747994192c \
--certificate-authorities=/etc/elasticsearch/certs/ca/ca.crt \
--fleet-server-cert=/etc/elastic-agent/certs/fleet-server/fleet-server.crt \
--fleet-server-cert-key=/etc/elastic-agent/certs/fleet-server/fleet-server.key
</pre></table></code></div></div><p>Step 6 provides the necessary info for the variables (SERVER_IP, FLEET_SERVICE_TOKEN, and ELASTICSEARCH_CA_FINGERPRINT) that need replacing. If you have followed the guide exactly so far, the certificate and keys should be in the same place.</p><p>Replace the needed values and paste the command into the server where Agent is installed and run it.</p><p>You should see a message that reads <code class="language-plaintext highlighter-rouge">Elastic Agent has been enrolled</code>. If you see that, now all that needs to happen is to start the Agent:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sudo service elastic-agent start
</pre></table></code></div></div><p><img data-src="/assets/img/post_images/elastic_install/snip25.png" alt="" data-proofer-ignore></p><p>If we go back to Kibana, we should see that the Fleet Server has connected. Click continue and now we can view our Agent(s)!</p><p><img data-src="/assets/img/post_images/elastic_install/snip26.png" alt="" data-proofer-ignore></p><p><img data-src="/assets/img/post_images/elastic_install/snip27.png" alt="" data-proofer-ignore></p><h2 id="elastic-agent"><span class="mr-2"><strong>Elastic Agent</strong></span><a href="#elastic-agent" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>With our Fleet Server up and running, we can now install Agents on systems we want to monitor and have them managed by our Fleet Server. For this Example, I’m going to test this on a Windows 11 VM. You can download an image here: <a href="https://developer.microsoft.com/en-us/windows/downloads/virtual-machines/">https://developer.microsoft.com/en-us/windows/downloads/virtual-machines/</a>. Just remember to ensure that the Network is configured for NAT just like the Ubuntu Server if you’re following along with the <a href="https://gore-ez-knee.github.io/posts/ubuntu-server-setup/">Ubuntu Server VM setup</a>.</p><p>I would also like to try out the Network Packet Capture integration, which for Windows requires <code class="language-plaintext highlighter-rouge">Npcap</code> to be installed. Then we’ll also need to download Packetbeat. Here is a list items that needs to be downloaded on the Windows host:</p><div class="table-wrapper"><table><thead><tr><th>File<th>Link<tbody><tr><td>Elastic Agent<td><a href="https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-8.1.1-windows-x86_64.zip">https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-8.1.1-windows-x86_64.zip</a><tr><td>Npcap<td><a href="https://npcap.com/dist/npcap-1.60.exe">https://npcap.com/dist/npcap-1.60.exe</a><tr><td>Packetbeat<td><a href="https://artifacts.elastic.co/downloads/beats/packetbeat/packetbeat-8.1.1-windows-x86_64.zip">https://artifacts.elastic.co/downloads/beats/packetbeat/packetbeat-8.1.1-windows-x86_64.zip</a><br /><a href="https://artifacts.elastic.co/downloads/beats/packetbeat/packetbeat-8.1.1-windows-x86_64.zip.sha512">https://artifacts.elastic.co/downloads/beats/packetbeat/packetbeat-8.1.1-windows-x86_64.zip.sha512</a><br /><a href="https://artifacts.elastic.co/downloads/beats/packetbeat/packetbeat-8.1.1-windows-x86_64.zip.asc">https://artifacts.elastic.co/downloads/beats/packetbeat/packetbeat-8.1.1-windows-x86_64.zip.asc</a></table></div><p>First we’ll install Npcap on Windows. Install it with all of the selected defaults. Keep hitting Next until it finishes.</p><p>Our Agent will need a policy to enroll in. Then we can add integrations to that policy. In Kibana go back to Fleet and click on <code class="language-plaintext highlighter-rouge">Agent policies</code> then <code class="language-plaintext highlighter-rouge">Create agent policy</code></p><p><img data-src="/assets/img/post_images/elastic_install/snip28.png" alt="" data-proofer-ignore></p><p><img data-src="/assets/img/post_images/elastic_install/snip29.png" alt="" data-proofer-ignore></p><p>Give the policy a name and click <code class="language-plaintext highlighter-rouge">Create agent policy</code>.</p><p><img data-src="/assets/img/post_images/elastic_install/snip30.png" alt="" data-proofer-ignore></p><p>Once the policy is created, click on the policy name then click <code class="language-plaintext highlighter-rouge">Add integration</code></p><p><img data-src="/assets/img/post_images/elastic_install/snip31.png" alt="" data-proofer-ignore></p><p><img data-src="/assets/img/post_images/elastic_install/snip32.png" alt="" data-proofer-ignore></p><p>The integrations I’d like to add are the Endpoint Security as well as the Network Packet Capture. Endpoint Security should be at the top of the integration page. Click on it then click <code class="language-plaintext highlighter-rouge">Add Endpoint Security</code></p><p><img data-src="/assets/img/post_images/elastic_install/snip33.png" alt="" data-proofer-ignore></p><p><img data-src="/assets/img/post_images/elastic_install/snip34.png" alt="" data-proofer-ignore></p><p>In Step 1 give the Integration a name. In Step 2, make sure that the tab <code class="language-plaintext highlighter-rouge">Existing hosts</code> is selected and the policy that we created is selected in <code class="language-plaintext highlighter-rouge">Agent policy</code>. Then click <code class="language-plaintext highlighter-rouge">Save and continue</code></p><p><img data-src="/assets/img/post_images/elastic_install/snip35.png" alt="" data-proofer-ignore></p><p>You’ll be prompted to <code class="language-plaintext highlighter-rouge">Add Elastic Agent to your hosts</code>, but we still need to add another integration. Select <code class="language-plaintext highlighter-rouge">Add Elastic Agent later</code>. Follow the same steps to add the <code class="language-plaintext highlighter-rouge">Network Packet Capture</code> integration. You can get back to integrations by selecting it under <code class="language-plaintext highlighter-rouge">Management</code> right above <code class="language-plaintext highlighter-rouge">Fleet</code> or the big blue button that appears at the bottom of the sidebar.</p><p><img data-src="/assets/img/post_images/elastic_install/snip36.png" alt="" data-proofer-ignore></p><p>In the search bar, type <code class="language-plaintext highlighter-rouge">Network Packet Capture</code> and add the integration to our policy.</p><p>Now we can go ahead and <code class="language-plaintext highlighter-rouge">Add Elastic Agent to your hosts</code> here, or we can go back to our Fleet and add an agent there.</p><p>In Step 1, make sure our policy with Endpoint Security and Network Packet Capture is selected. Ignore Step 2. In Step 3, Select Windows.</p><p>Before we copy and paste the command into Windows, we need to extract the contents of the elastic-agent zip file we downloaded. Then we need to copy and paste the three Packetbeat files we downloaded and paste them into the the newly extracted folder <code class="language-plaintext highlighter-rouge">elastic-agent-8.1.1-windows-x86_64\data\elastic-agent-7f30bb\downloads\</code></p><p><img data-src="/assets/img/post_images/elastic_install/snip41.png" alt="" data-proofer-ignore></p><p>Then we need to open a PowerShell or Cmd window with Administrator privileges. Navigate inside of the extracted <code class="language-plaintext highlighter-rouge">elastic-agent-8.1.1-windows-x86_64\</code> directory. There should be an <code class="language-plaintext highlighter-rouge">elastic-agent.exe</code> executable there. Then we can copy and paste the command from Kibana.</p><p><img data-src="/assets/img/post_images/elastic_install/snip38.png" alt="" data-proofer-ignore></p><p><img data-src="/assets/img/post_images/elastic_install/snip37.png" alt="" data-proofer-ignore></p><p><img data-src="/assets/img/post_images/elastic_install/snip39.png" alt="" data-proofer-ignore></p><p><img data-src="/assets/img/post_images/elastic_install/snip40.png" alt="" data-proofer-ignore></p><p>We’ll need to add a <code class="language-plaintext highlighter-rouge">--insecure</code> at the end of the command to enroll the Agent and to avoid an untrusted certificate error since these certs are self-signed.</p><p>If everything enrolled correctly, you should see the output:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>Successfully enrolled the Elastic Agent.
Elastic Agent has been successfully installed.
</pre></table></code></div></div><p>Then in Kibana we should see our new, healthy Agent</p><p><img data-src="/assets/img/post_images/elastic_install/snip42.png" alt="" data-proofer-ignore></p><p>Now if we head over to Security in Kibana, we can check out Host and Network activity. Then we can load prebuilt Elastic rules under <code class="language-plaintext highlighter-rouge">Detect</code> and enable them.</p><p><img data-src="/assets/img/post_images/elastic_install/snip45.png" alt="" data-proofer-ignore></p><p><img data-src="/assets/img/post_images/elastic_install/snip43.png" alt="" data-proofer-ignore></p><p><img data-src="/assets/img/post_images/elastic_install/snip44.png" alt="" data-proofer-ignore></p><p><img data-src="/assets/img/post_images/elastic_install/snip46.png" alt="" data-proofer-ignore></p><p>There are also some pre-built Dashboards you can use to visualize the data coming in.</p><p><img data-src="/assets/img/post_images/elastic_install/snip47.png" alt="" data-proofer-ignore></p><h2 id="all-in-one-script-install"><span class="mr-2"><strong>All-In-One Script Install</strong></span><a href="#all-in-one-script-install" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p><a href="https://github.com/gore-ez-knee/awesome-scripts/tree/main/elastic-quickstart-bare-metal">https://github.com/gore-ez-knee/awesome-scripts/tree/main/elastic-quickstart-bare-metal</a></p><p>If you would like to setup up a single stack quickly and painlessly, I threw all of the commands into a script. Being that I installed this on a Debian/Ubuntu server, the script has been setup to install <strong>Debian packages only</strong>. Also this only works for Elastic version 8.0.0+ because Elastic v8 automatically creates TLS certificates for Elasticsearch communication and I haven’t put checks in to create and update Elasticsearch should someone want to install an older version.</p><p>The script requires that some <code class="language-plaintext highlighter-rouge">sudo</code> commands be run. This is for enabling services to autostart as well as modifying <code class="language-plaintext highlighter-rouge">/etc</code> files.</p><p>It also generates self-signed certificates to enable TLS between Kibana and one’s browser as well as for Fleet Server.</p><p><strong>UPDATE 18 Apr 2022</strong></p><p>Modified the script to automatically setup Fleet Server. I eventually realized I could use a proxy (Burp Suite) to capture the API calls used when manually setting up Fleet through the UI. Then I could create <code class="language-plaintext highlighter-rouge">curl</code> commands to set everything up in the script.</p><p>Still working on getting this setup with Docker the same way…</p><p>When ran, the output should look similar to this:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
</pre><td class="rouge-code"><pre>elastic-user@elastic:~$ sudo ./elastic_stack.sh
[sudo] password for elastic-user:
Select a number corresponding to the version you'd like to download:
0)  8.1.2
1)  8.1.1
2)  8.1.0
3)  8.0.1
4)  8.0.0
Enter number: 0
Select a number corresponding the Server's IP: 
0)  192.168.235.133
Enter a number: 0
[*] Downloading Elasticsearch 8.1.1...
[*] Elasticsearch 8.1.1 Download Successful!
[*] Installing Elasticsearch 8.1.1...
[+] Elasticsearch 8.1.1 Installed!
[!] Important output saved in elasticsearch_install.out
[*] Enabling Elasticsearch to autostart...
[*] Starting Elasticsearch...
[+] Successful Connection to Elasticsearch! :)
[*] Generating Kibana Enrollment Token...
[*] Downloading Kibana 8.1.1...
[*] Kibana 8.1.1 Download Successful!
[*] Installing Kibana 8.1.1...
[+] Kibana Installed!
[*] Setting Up Kibana with Elasticsearch...
[+] Kibana Successfully Setup with Elasticsearch
[?] Would you like to add a password to your self-signed keys?(y/n): y
Password:
Password (again):
[*] Creating self-signed certificates...
[+] Certificates created!
[*] Modifying kibana.yml with new settings...
[*] Generating Encryption Keys for Kibana and writing them to kibana.yml
[*] Enabling Kibana to autostart...
[*] Starting Kibana...
================================================================
==              Elasticsearch &amp; Kibana Installed              ==
================================================================
[*] Now go to https://SERVER_IP:5601
[*] Login with:
    Username: elastic
    Password: Z=9ZGo9Kgva3Rg1EsDpA
================================================================
[?] Would you like to setup a Fleet Server?(y/n): y
[*] Downloading Elastic Agent 8.1.1...
[*] Elastic Agent 8.1.1 Download Successful!
[*] Installing Elastic Agent 8.1.1...
[+] Elastic agent 8.1.1 Installed!
[*] Generating a CA to create Fleet Server Certificates
[!] Need to install Unzip binary
[*] Creating Certificates for Fleet Server
[*] Setting Up Fleet Agent Policy...DONE
[*] Snagging Service Token...DONE
[*] Getting Elasticsearch CA Fingerprint...DONE
[*] Adding Fleet Server host...DONE
[*] Enrolling Fleet...DONE
================================================================
==                   Fleet Server Installed                   ==
================================================================
</pre></table></code></div></div><p>To change the superuser password or generate enrollment tokens to add additional Elasticsearch nodes, the script outputs the initial config output to the file <code class="language-plaintext highlighter-rouge">elasticsearch_install.out</code> which gives the needed commands.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/misc/'>Misc</a>, <a href='/categories/elastic/'>Elastic</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/elasticsearch/" class="post-tag no-text-decoration" >elasticsearch</a> <a href="/tags/elastic/" class="post-tag no-text-decoration" >elastic</a> <a href="/tags/kibana/" class="post-tag no-text-decoration" >kibana</a> <a href="/tags/ubuntu/" class="post-tag no-text-decoration" >ubuntu</a> <a href="/tags/installation/" class="post-tag no-text-decoration" >installation</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Quickstart Elastic Stack - Gore-Ez-Knee&amp;url=https://gore-ez-knee.github.io/posts/elastic-install/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Quickstart Elastic Stack - Gore-Ez-Knee&amp;u=https://gore-ez-knee.github.io/posts/elastic-install/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://gore-ez-knee.github.io/posts/elastic-install/&amp;text=Quickstart Elastic Stack - Gore-Ez-Knee" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/kali-cloud-novnc/">Stream Kali Linux to your Browser from AWS</a><li><a href="/posts/backup-restore-gitlab/">Backup/Restore GitLab</a><li><a href="/posts/getting-started-cybersecurity/">Intro to Cybersecurity</a><li><a href="/posts/htb-ca-2022-writeup-table/">HTB Cyber Apocalypse CTF - Table of Write-ups</a><li><a href="/posts/elastic-install/">Quickstart Elastic Stack</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/htb/">htb</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/ctf/">ctf</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/gitlab/">gitlab</a> <a class="post-tag" href="/tags/ubuntu/">ubuntu</a> <a class="post-tag" href="/tags/docker-compose/">docker-compose</a> <a class="post-tag" href="/tags/elastic/">elastic</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/evt/">evt</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/ubuntu-server-setup/"><div class="card-body"> <em class="timeago small" data-ts="1648150200" > 2022-03-24 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Ubuntu Server Setup</h3><div class="text-muted small"><p> Here is a guide I created to stand up an Ubuntu Server to test standing up an Elastic Stack. Downloaded the Ubuntu Server iso: https://ubuntu.com/download/server Using VMware Workstation...</p></div></div></a></div><div class="card"> <a href="/posts/getting-started-cybersecurity/"><div class="card-body"> <em class="timeago small" data-ts="1653003000" > 2022-05-19 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Intro to Cybersecurity</h3><div class="text-muted small"><p> Intro to Cyber Security Cyber Security continues to be an ever-growing, in-demand career field as everything in our lives transition to computers. SANS has a list of some careers that branch off o...</p></div></div></a></div><div class="card"> <a href="/posts/backup-restore-gitlab/"><div class="card-body"> <em class="timeago small" data-ts="1654354800" > 2022-06-04 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Backup/Restore GitLab</h3><div class="text-muted small"><p> Do you have a small GitLab container running on an instance in AWS for yourself or a small team? Have you ever needed to back-up GitLab and move it to another machine wether that be on another inst...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/ubuntu-server-setup/" class="btn btn-outline-primary" prompt="Older"><p>Ubuntu Server Setup</p></a> <a href="/posts/htb-ca-2022-forensics-puppeteer/" class="btn btn-outline-primary" prompt="Newer"><p>HTB Cyber Apocalypse CTF - Forensics - Puppeteer</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/gore_ez_knee">Gore-Ez-Knee</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/htb/">htb</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/ctf/">ctf</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/gitlab/">gitlab</a> <a class="post-tag" href="/tags/ubuntu/">ubuntu</a> <a class="post-tag" href="/tags/docker-compose/">docker-compose</a> <a class="post-tag" href="/tags/elastic/">elastic</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/evt/">evt</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-BJ7S2G5H9F"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-BJ7S2G5H9F'); }); </script>
